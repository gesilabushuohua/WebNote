# 性能优化
https://web.dev/fast/#lazy-load-images-and-video

## 性能监控
### 性能指标 RAIL
RAIL 性能模型，将用户体验分解到按键操作中，帮组定义性能目标。
代表 Web 应用声明周期的四个不同方面，响应、动画、空闲、加载，因此性能目标是根据上下文以及用户如何感知延迟的用户体验研究来定义的。

用户延迟感知性能延迟指标：
0-16毫秒 动画流畅
0-100毫秒 用户感知结果即时呈现
100-1000 毫秒 用户感知任务进展是自然连续的
1000 毫秒 用户注意力转移
10000 毫秒 用户感到失望

目标：
* 响应，确保在 100 毫秒内产生可见响应，需要在 50 毫秒内处理用户输入事件
* 动画，在 16 毫秒内生成一帧，每秒60新帧，60 FPS
* 空闲，最大限度增加空闲时间，提高页面在 50 毫秒内响应用户输入的几率，例如，对初始化页面加载，应加载尽可能少的数据，然后利用空闲时间加载其余数据
* 加载，在使用速度较慢 3G 连接终端移动设备上，在 5 秒内交互内容并实现可交互，为来产生完整加载的感觉，不必在 5 秒种时间内加载所有内容，可以考虑延迟加载图像、代码拆分包

### 相关 API
* Performance API

## 打包优化
### webpack
loader
dll
happypack
压缩代码
tree shaking
scope hoisting
code splitting

### 待看
https://www.smashingmagazine.com/2021/01/front-end-performance-2021-free-pdf-checklist/#top

### 图片 base64、cdn

## 网络优化
### dns
### cdn
### 缓存
### preload/prefetch/懒加载
### SSR
SSR VS CSR
SSR 传统渲染方式，服务端把渲染完整的页面吐给客户端，减少一次客户端到服务端的一次 http 请求，加快相应的速度，一般用于首屏性能优化。
CSR 依赖运行在客户端的 JS，用户首次发送请求只能得到小部分的指示性 HTML 代码，第二次请求将会请求更多包含 HTML 字符串的 JS 文件。
总结，就是数据拼接 HTML 字符串者件事放在服务端还是客户端，SSR 强在首屏渲染，CSR 强在用户和页面多交互场景。

Vue SSR 在客户端请求服务器的时候，服务器到数据库中获取相关的数据，并且在服务器内部将 Vue 组件渲染成 HTML，并且将数据、HTML 一并返回给客户端。

优势： 
* 有利于 SEO，方便爬虫爬取页面
* 白屏时间更短

SSR 之所以能够实现，本质上是因为虚拟 DOM 存在， 在服务器，操作 Javascript 对象，判断环境是服务器欢快，把虚拟 DOM 映射成字符串输出，在客户单端，将虚拟 DOM 映射成真实 DOM，完成页面挂载

### 

## 代码优化
### loading/骨架屏
### web worker
### 虚拟列表
### 懒加载
### dom/style 批量更新